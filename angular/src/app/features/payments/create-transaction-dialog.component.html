<h2 mat-dialog-title>Create New Transaction</h2>
<mat-dialog-content>
  <p class="dialog-subtitle">AI-powered fraud detection will analyze this transaction</p>
  
  <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Amount</mat-label>
        <input matInput type="number" formControlName="amount" placeholder="0.00" step="0.01">
        <mat-error *ngIf="transactionForm.get('amount')?.hasError('required')">Amount is required</mat-error>
        <mat-error *ngIf="transactionForm.get('amount')?.hasError('min')">Amount must be greater than 0</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Payment Method</mat-label>
        <mat-select formControlName="paymentMethod">
          <mat-option value="credit_card">Credit Card</mat-option>
          <mat-option value="debit_card">Debit Card</mat-option>
          <mat-option value="bank_transfer">Bank Transfer</mat-option>
          <mat-option value="cash">Cash</mat-option>
          <mat-option value="digital_wallet">Digital Wallet</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Merchant Name</mat-label>
        <input matInput formControlName="merchantName" placeholder="e.g., SmartMediShop">
        <mat-error *ngIf="transactionForm.get('merchantName')?.hasError('required')">Merchant name is required</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Device Type</mat-label>
        <mat-select formControlName="deviceType">
          <mat-option value="desktop">Desktop</mat-option>
          <mat-option value="mobile">Mobile</mat-option>
          <mat-option value="tablet">Tablet</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Location Country</mat-label>
        <mat-select formControlName="locationCountry">
          <mat-option value="US">United States</mat-option>
          <mat-option value="CA">Canada</mat-option>
          <mat-option value="UK">United Kingdom</mat-option>
          <mat-option value="DE">Germany</mat-option>
          <mat-option value="FR">France</mat-option>
          <mat-option value="TN">Tunisia</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Transaction Type</mat-label>
        <mat-select formControlName="transactionType">
          <mat-option value="purchase">Purchase</mat-option>
          <mat-option value="refund">Refund</mat-option>
          <mat-option value="transfer">Transfer</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()" [disabled]="loading">Cancel</button>
  <button mat-raised-button 
          color="primary" 
          (click)="onSubmit()" 
          [disabled]="transactionForm.invalid || loading">
    <mat-spinner *ngIf="loading" diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
    <mat-icon *ngIf="!loading">security</mat-icon>
    Create Transaction with AI Analysis
  </button>
</mat-dialog-actions>

